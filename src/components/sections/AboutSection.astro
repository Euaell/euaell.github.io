---
import { experienceData } from '@/data/experience';
import { educationData } from '@/data/education';

const stats = [
  { label: 'Years Experience', value: 2 },
  { label: 'Projects Completed', value: 15 },
  { label: 'Technologies', value: 20 },
  { label: 'Happy Clients', value: 5 },
];

const skillCategories = [
  {
    title: 'Frontend',
    skills: ['React', 'Next.js', 'TypeScript', 'Vue.js', 'Tailwind CSS', 'JavaScript'],
  },
  {
    title: 'Backend',
    skills: ['Node.js', 'Express', 'FastAPI', 'Python', 'REST APIs', 'GraphQL'],
  },
  {
    title: 'Database',
    skills: ['PostgreSQL', 'MongoDB', 'Redis', 'Prisma', 'SQL'],
  },
  {
    title: 'DevOps & Tools',
    skills: ['Docker', 'Git', 'CI/CD', 'AWS', 'Vercel', 'Linux'],
  },
  {
    title: 'AI & ML',
    skills: ['OpenAI API', 'LangChain', 'Machine Learning', 'Data Analysis'],
  },
];
---

<section id="about" class="py-16 md:py-24 bg-neutral-950/50">
  <div class="container-custom">
    <!-- Section Header -->
    <div class="text-center mb-12 md:mb-16">
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
        <span class="gradient-text">About Me</span>
      </h2>
      <p class="text-base md:text-lg text-white/70 max-w-2xl mx-auto px-4">
        Passionate full-stack developer with expertise in building scalable web applications and AI-powered solutions.
      </p>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-12 md:mb-16">
      {stats.map((stat) => (
        <div
          class="stat-card glass-card rounded-2xl p-6 text-center"
          data-target={stat.value}
        >
          <div class="text-4xl md:text-5xl font-bold mb-2">
            <span class="stat-value gradient-text-primary">0</span>
            <span class="gradient-text-primary">+</span>
          </div>
          <div class="text-sm md:text-base text-white/70">{stat.label}</div>
        </div>
      ))}
    </div>

    <!-- Experience & Education -->
    <div class="grid lg:grid-cols-2 gap-8 md:gap-10 mb-12 md:mb-16">
      <!-- Experience Timeline -->
      <div>
        <h3 class="text-xl md:text-2xl font-bold mb-6 flex items-center gap-2">
          <span class="text-2xl">üíº</span>
          Experience
        </h3>
        <div class="space-y-4">
          {experienceData.map((exp, index) => (
            <div
              class="timeline-item glass-card rounded-xl p-6 relative border-l-4 border-primary-500/50"
              data-index={index}
            >
              <div class="text-sm text-primary-400 font-medium mb-2">{exp.date}</div>
              <h4 class="text-xl font-bold mb-1">{exp.title}</h4>
              <div class="text-white/70 mb-2">{exp.subtitle}</div>
              <div class="text-sm text-white/50 mb-3">{exp.location}</div>
              <ul class="space-y-2">
                {exp.description.map((desc) => (
                  <li class="text-white/70 text-sm flex gap-2">
                    <span class="text-primary-400 mt-1">‚Ä¢</span>
                    <span>{desc}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </div>

      <!-- Education Timeline -->
      <div>
        <h3 class="text-xl md:text-2xl font-bold mb-6 flex items-center gap-2">
          <span class="text-2xl">üéì</span>
          Education
        </h3>
        <div class="space-y-4">
          {educationData.map((edu, index) => (
            <div
              class="timeline-item glass-card rounded-xl p-6 relative border-l-4 border-accent-500/50"
              data-index={index + experienceData.length}
            >
              <div class="text-sm text-accent-400 font-medium mb-2">{edu.date}</div>
              <h4 class="text-xl font-bold mb-1">{edu.title}</h4>
              <div class="text-white/70 mb-2">{edu.subtitle}</div>
              <div class="text-sm text-white/50 mb-3">{edu.location}</div>
              <ul class="space-y-2">
                {edu.description.map((desc) => (
                  <li class="text-white/70 text-sm flex gap-2">
                    <span class="text-accent-400 mt-1">‚Ä¢</span>
                    <span>{desc}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </div>
    </div>

    <!-- Skills Grid -->
    <div>
      <h3 class="text-xl md:text-2xl font-bold mb-8 md:mb-10 text-center flex items-center justify-center gap-2">
        <span class="text-2xl">üõ†Ô∏è</span>
        Skills & Technologies
      </h3>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto">
        {skillCategories.map((category, categoryIndex) => (
          <div class="skill-category" data-index={categoryIndex}>
            <h4 class="text-lg font-semibold mb-4 text-white/90 flex items-center gap-2">
              <span class="w-1 h-6 bg-gradient-to-b from-primary-500 to-accent-500 rounded-full"></span>
              {category.title}
            </h4>
            <div class="flex flex-wrap gap-2">
              {category.skills.map((skill) => (
                <span class="skill-badge px-4 py-2 rounded-lg text-sm font-medium glass-card hover:glass-strong transition-all duration-300 cursor-default">
                  {skill}
                </span>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<script>
  // Intersection Observer for scroll animations
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');

          // Trigger counter animation for stats
          if (entry.target.classList.contains('stat-card')) {
            animateCounter(entry.target as HTMLElement);
          }

          // Unobserve after animation
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.2 }
  );

  // Observe all animated elements
  document.querySelectorAll('.stat-card, .timeline-item, .skill-category').forEach((el) => {
    observer.observe(el);
  });

  function animateCounter(element: HTMLElement) {
    const target = parseInt(element.dataset.target || '0');
    const valueElement = element.querySelector('.stat-value');
    if (!valueElement) return;

    let current = 0;
    const increment = target / 60; // 60 frames for smooth animation
    const duration = 2000; // 2 seconds
    const frameDuration = duration / 60;

    const timer = setInterval(() => {
      current += increment;
      if (current >= target) {
        current = target;
        clearInterval(timer);
      }
      valueElement.textContent = Math.floor(current).toString();
    }, frameDuration);
  }
</script>

<style>
  .stat-card,
  .timeline-item,
  .skill-category {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .stat-card.in-view,
  .timeline-item.in-view,
  .skill-category.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stagger timeline items */
  .timeline-item[data-index="0"].in-view { transition-delay: 0s; }
  .timeline-item[data-index="1"].in-view { transition-delay: 0.1s; }
  .timeline-item[data-index="2"].in-view { transition-delay: 0.2s; }
  .timeline-item[data-index="3"].in-view { transition-delay: 0.3s; }
  .timeline-item[data-index="4"].in-view { transition-delay: 0.4s; }

  /* Stagger skill categories */
  .skill-category[data-index="0"].in-view { transition-delay: 0s; }
  .skill-category[data-index="1"].in-view { transition-delay: 0.1s; }
  .skill-category[data-index="2"].in-view { transition-delay: 0.15s; }
  .skill-category[data-index="3"].in-view { transition-delay: 0.2s; }
  .skill-category[data-index="4"].in-view { transition-delay: 0.25s; }

  /* Skill badge hover effect */
  .skill-badge {
    border: 1px solid rgba(255, 255, 255, 0.08);
  }

  .skill-badge:hover {
    transform: translateY(-2px);
    border-color: rgba(59, 130, 246, 0.3);
  }
</style>
