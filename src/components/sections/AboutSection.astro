---
import { experienceData } from '@/data/experience';
import { educationData } from '@/data/education';

const stats = [
  { label: 'Years Experience', value: 2 },
  { label: 'Projects Completed', value: 15 },
  { label: 'Technologies', value: 20 },
  { label: 'Happy Clients', value: 5 },
];

const skills = [
  { name: 'React / Next.js', level: 95 },
  { name: 'TypeScript', level: 90 },
  { name: 'Python / FastAPI', level: 90 },
  { name: 'Node.js / Express', level: 85 },
  { name: 'PostgreSQL / MongoDB', level: 85 },
  { name: 'Docker / CI/CD', level: 80 },
  { name: 'AI/ML Integration', level: 85 },
  { name: 'Vue.js', level: 75 },
];
---

<section id="about" class="section-padding bg-neutral-950/50">
  <div class="container-custom">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-bold mb-4">
        <span class="gradient-text">About Me</span>
      </h2>
      <p class="text-xl text-white/70 max-w-2xl mx-auto">
        Passionate full-stack developer with expertise in building scalable web applications and AI-powered solutions.
      </p>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-20">
      {stats.map((stat) => (
        <div
          class="stat-card glass-card rounded-2xl p-6 text-center"
          data-target={stat.value}
        >
          <div class="text-4xl md:text-5xl font-bold mb-2">
            <span class="stat-value gradient-text-primary">0</span>
            <span class="gradient-text-primary">+</span>
          </div>
          <div class="text-sm md:text-base text-white/70">{stat.label}</div>
        </div>
      ))}
    </div>

    <!-- Experience & Education -->
    <div class="grid lg:grid-cols-2 gap-12 mb-20">
      <!-- Experience Timeline -->
      <div>
        <h3 class="text-2xl md:text-3xl font-bold mb-8 flex items-center gap-3">
          <span class="text-3xl">üíº</span>
          Experience
        </h3>
        <div class="space-y-6">
          {experienceData.map((exp, index) => (
            <div
              class="timeline-item glass-card rounded-xl p-6 relative border-l-4 border-primary-500/50"
              data-index={index}
            >
              <div class="text-sm text-primary-400 font-medium mb-2">{exp.date}</div>
              <h4 class="text-xl font-bold mb-1">{exp.title}</h4>
              <div class="text-white/70 mb-2">{exp.subtitle}</div>
              <div class="text-sm text-white/50 mb-3">{exp.location}</div>
              <ul class="space-y-2">
                {exp.description.map((desc) => (
                  <li class="text-white/70 text-sm flex gap-2">
                    <span class="text-primary-400 mt-1">‚Ä¢</span>
                    <span>{desc}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </div>

      <!-- Education Timeline -->
      <div>
        <h3 class="text-2xl md:text-3xl font-bold mb-8 flex items-center gap-3">
          <span class="text-3xl">üéì</span>
          Education
        </h3>
        <div class="space-y-6">
          {educationData.map((edu, index) => (
            <div
              class="timeline-item glass-card rounded-xl p-6 relative border-l-4 border-accent-500/50"
              data-index={index + experienceData.length}
            >
              <div class="text-sm text-accent-400 font-medium mb-2">{edu.date}</div>
              <h4 class="text-xl font-bold mb-1">{edu.title}</h4>
              <div class="text-white/70 mb-2">{edu.subtitle}</div>
              <div class="text-sm text-white/50 mb-3">{edu.location}</div>
              <ul class="space-y-2">
                {edu.description.map((desc) => (
                  <li class="text-white/70 text-sm flex gap-2">
                    <span class="text-accent-400 mt-1">‚Ä¢</span>
                    <span>{desc}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </div>
    </div>

    <!-- Skills Grid -->
    <div>
      <h3 class="text-2xl md:text-3xl font-bold mb-8 text-center flex items-center justify-center gap-3">
        <span class="text-3xl">üõ†Ô∏è</span>
        Skills & Technologies
      </h3>
      <div class="grid md:grid-cols-2 gap-6 max-w-4xl mx-auto">
        {skills.map((skill, index) => (
          <div class="skill-card glass-card rounded-xl p-6" data-index={index}>
            <div class="flex justify-between items-center mb-3">
              <span class="font-medium">{skill.name}</span>
              <span class="text-sm text-white/50">{skill.level}%</span>
            </div>
            <div class="skill-bar h-2 bg-white/10 rounded-full overflow-hidden">
              <div
                class="skill-fill h-full bg-gradient-to-r from-primary-500 to-accent-500 rounded-full transition-all duration-1000 ease-out"
                data-level={skill.level}
                style="width: 0%;"
              ></div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<script>
  // Intersection Observer for scroll animations
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');

          // Trigger counter animation for stats
          if (entry.target.classList.contains('stat-card')) {
            animateCounter(entry.target as HTMLElement);
          }

          // Trigger skill bar animation
          if (entry.target.classList.contains('skill-card')) {
            animateSkillBar(entry.target as HTMLElement);
          }

          // Unobserve after animation
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.2 }
  );

  // Observe all animated elements
  document.querySelectorAll('.stat-card, .timeline-item, .skill-card').forEach((el) => {
    observer.observe(el);
  });

  function animateCounter(element: HTMLElement) {
    const target = parseInt(element.dataset.target || '0');
    const valueElement = element.querySelector('.stat-value');
    if (!valueElement) return;

    let current = 0;
    const increment = target / 60; // 60 frames for smooth animation
    const duration = 2000; // 2 seconds
    const frameDuration = duration / 60;

    const timer = setInterval(() => {
      current += increment;
      if (current >= target) {
        current = target;
        clearInterval(timer);
      }
      valueElement.textContent = Math.floor(current).toString();
    }, frameDuration);
  }

  function animateSkillBar(element: HTMLElement) {
    const skillFill = element.querySelector('.skill-fill') as HTMLElement;
    if (!skillFill) return;

    const level = parseInt(skillFill.dataset.level || '0');

    // Delay slightly for stagger effect
    setTimeout(() => {
      skillFill.style.width = `${level}%`;
    }, 100);
  }
</script>

<style>
  .stat-card,
  .timeline-item,
  .skill-card {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .stat-card.in-view,
  .timeline-item.in-view,
  .skill-card.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stagger timeline items */
  .timeline-item[data-index="0"].in-view { transition-delay: 0s; }
  .timeline-item[data-index="1"].in-view { transition-delay: 0.1s; }
  .timeline-item[data-index="2"].in-view { transition-delay: 0.2s; }
  .timeline-item[data-index="3"].in-view { transition-delay: 0.3s; }
  .timeline-item[data-index="4"].in-view { transition-delay: 0.4s; }

  /* Stagger skill cards */
  .skill-card[data-index="0"].in-view { transition-delay: 0s; }
  .skill-card[data-index="1"].in-view { transition-delay: 0.05s; }
  .skill-card[data-index="2"].in-view { transition-delay: 0.1s; }
  .skill-card[data-index="3"].in-view { transition-delay: 0.15s; }
  .skill-card[data-index="4"].in-view { transition-delay: 0.2s; }
  .skill-card[data-index="5"].in-view { transition-delay: 0.25s; }
  .skill-card[data-index="6"].in-view { transition-delay: 0.3s; }
  .skill-card[data-index="7"].in-view { transition-delay: 0.35s; }
</style>
