---
import { projectsData } from '@/data/projects';

// Get only featured projects, limit to 3
const featured = projectsData.filter((p) => p.featured).slice(0, 3);
---

<section id="work" class="py-16 md:py-24 bg-neutral-950/30">
  <div class="container-custom">
    <!-- Section Header -->
    <div class="text-center mb-12 md:mb-16">
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
        <span class="gradient-text">Featured Work</span>
      </h2>
      <p class="text-base md:text-lg text-white/70 max-w-2xl mx-auto px-4">
        Highlighting some of my best projects that showcase my skills in full-stack development and AI integration.
      </p>
    </div>

    <!-- Featured Projects -->
    <div class="mb-10 md:mb-12">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {featured.map((project, index) => (
          <div
            class="featured-project glass-card rounded-2xl overflow-hidden card-hover group"
            data-index={index}
          >
            {/* Project Image */}
            <div class="aspect-video bg-gradient-to-br from-primary-900/50 to-accent-900/50 relative overflow-hidden">
              <img
                src={project.image}
                alt={project.title}
                class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500"
              />
            </div>

            {/* Project Content */}
            <div class="p-6">
              <h4 class="text-xl font-bold mb-3 group-hover:text-primary-400 transition-colors">
                {project.title}
              </h4>
              <p class="text-white/70 text-sm mb-4 line-clamp-3">
                {project.description}
              </p>

              {/* Tags */}
              <div class="flex flex-wrap gap-2 mb-4">
                {project.tags.slice(0, 4).map((tag) => (
                  <span class="px-3 py-1 rounded-full text-xs glass text-white/80">
                    {tag}
                  </span>
                ))}
                {project.tags.length > 4 && (
                  <span class="px-3 py-1 rounded-full text-xs glass text-white/80">
                    +{project.tags.length - 4}
                  </span>
                )}
              </div>

              {/* Links */}
              <div class="flex gap-3">
                {project.link && (
                  <a
                    href={project.link}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="flex-1 btn-primary text-center py-2 text-sm"
                  >
                    Live Demo
                  </a>
                )}
                <a
                  href={project.repositoryLink}
                  target="_blank"
                  rel="noopener noreferrer"
                  class={`${
                    project.link ? 'flex-1' : 'w-full'
                  } btn-secondary text-center py-2 text-sm`}
                >
                  GitHub
                </a>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- View All Projects CTA -->
      <div class="mt-12 text-center">
        <a
          href="/projects"
          class="inline-flex items-center gap-2 btn-primary px-8 py-4"
        >
          View All Projects
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M14 5l7 7m0 0l-7 7m7-7H3"
            />
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  // Intersection Observer for featured projects
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.2 }
  );

  document.querySelectorAll('.featured-project').forEach((el) => {
    observer.observe(el);
  });
</script>

<style>
  .featured-project {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .featured-project.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stagger featured projects */
  .featured-project[data-index="0"].in-view { transition-delay: 0s; }
  .featured-project[data-index="1"].in-view { transition-delay: 0.15s; }
  .featured-project[data-index="2"].in-view { transition-delay: 0.3s; }
  .featured-project[data-index="3"].in-view { transition-delay: 0.45s; }
</style>
